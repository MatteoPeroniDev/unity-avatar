<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Unity Web Player | LotoAvatarLiveSync</title>

  <!-- MICROPHONE PRO START -->
  <script src='./microphone.js'></script>
  <!-- MICROPHONE PRO END -->

  <!-- Adapter START -->
  <script src='./adapter.js'></script>
  <!-- Adapter END -->

  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>

<body style="text-align: center; padding: 0; border: 0; margin: 0;">

  <div class="switch-on-container">
    <div class="switch-on-text">
      <div class="close-text-icon">
        <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M5.29289 5.29289C5.68342 4.90237 6.31658 4.90237 6.70711 5.29289L12 10.5858L17.2929 5.29289C17.6834 4.90237 18.3166 4.90237 18.7071 5.29289C19.0976 5.68342 19.0976 6.31658 18.7071 6.70711L13.4142 12L18.7071 17.2929C19.0976 17.6834 19.0976 18.3166 18.7071 18.7071C18.3166 19.0976 17.6834 19.0976 17.2929 18.7071L12 13.4142L6.70711 18.7071C6.31658 19.0976 5.68342 19.0976 5.29289 18.7071C4.90237 18.3166 4.90237 17.6834 5.29289 17.2929L10.5858 12L5.29289 6.70711C4.90237 6.31658 4.90237 5.68342 5.29289 5.29289Z"
            fill="#0F1729" />
        </svg>
      </div>
      <p>Hi! Click here to start a conversation.</p>
    </div>
    <button class="switch-on-avatar">
    </button>
  </div>

  <div id="unity-container"
    style="display:none; position:absolute; bottom:0; right:0; width:100%; height:100%; max-width:100vw; max-height:100vh; z-index:10; pointer-events:none; overflow:hidden;">
    <button class="switch-off-avatar">
      <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
        <path d="M17 9.5L12 14.5L7 9.5" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>
    <canvas id="unity-canvas"
      style="width:100%; height: 100%; max-width:100vw; max-height:100vh; object-fit:contain; border:0; outline:0; background-color: transparent;"
      tabindex="-1"></canvas>
  </div>

  <script src="Build/BuildWebGL.loader.js"></script>

  <script>
    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
      // Mobile device style: fill the whole browser client area with the game canvas:
      var meta = document.createElement('meta');
      meta.name = 'viewport';
      meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
      document.getElementsByTagName('head')[0].appendChild(meta);

      var canvas = document.querySelector("#unity-canvas");
      canvas.style.width = "100%";
      canvas.style.height = "100%";
      canvas.style.position = "fixed";

      document.body.style.textAlign = "left";
    }

    createUnityInstance(document.querySelector("#unity-canvas"), {
      arguments: [],
      dataUrl: "Build/BuildWebGL.data",
      frameworkUrl: "Build/BuildWebGL.framework.js",
      codeUrl: "Build/BuildWebGL.wasm",
      streamingAssetsUrl: "StreamingAssets",
      companyName: "IMORI STUDIO Srl",
      productName: "LotoAvatarLiveSync",
      productVersion: "1.0",
      // matchWebGLToCanvasSize: false, // Uncomment this to separately control WebGL canvas render size and DOM element size.
      // devicePixelRatio: 1, // Uncomment this to override low DPI rendering on high DPI displays.
    });

    const closeTextIcon = document.querySelector(".close-text-icon");
    const switchOnText = document.querySelector(".switch-on-text");
    const switchOnContainer = document.querySelector(".switch-on-container");
    const buttonSwitchOn = document.querySelector(".switch-on-avatar");
    const buttonSwitchOff = document.querySelector(".switch-off-avatar");
    const container = document.getElementById("unity-container");

    buttonSwitchOn.addEventListener("click", function () {
      switchOnContainer.style.display = "none";
      container.style.display = "block";
      container.style.pointerEvents = "auto";
    });

    buttonSwitchOff.addEventListener("click", function () {
      switchOnContainer.style.display = "flex";
      container.style.display = "none";
      container.style.pointerEvents = "none";
    });

    closeTextIcon.addEventListener("click", function () {
      switchOnText.style.opacity = "0";
      switchOnText.style.pointerEvents = "none";
    });
  </script>
</body>

</html>